{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport cookies from \"js-cookie\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport initFirebase from \"../auth/initFirebase\";\ninitFirebase();\n\nvar useUser = function useUser() {\n  _s();\n\n  var _useState = useState(),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var router = useRouter();\n\n  var logout = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", firebase.auth().signOut().then(function () {\n                // Sign-out successful.\n                cookies.remove(\"auth\");\n                router.push(\"/auth\");\n              })[\"catch\"](function (e) {\n                console.error(e);\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function logout() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var cookie = cookies.get(\"auth\");\n\n    if (!cookie) {\n      router.push(\"/\");\n      return;\n    }\n\n    setUser(JSON.parse(cookie)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return {\n    user: user,\n    logout: logout\n  };\n};\n\n_s(useUser, \"vM+0cQpbmcqvR1155uZ1Pw51794=\", false, function () {\n  return [useRouter];\n});\n\nexport { useUser };","map":{"version":3,"sources":["/Users/kaybennett/.Trash/nextjs-blog/nextjs-blog/utils/auth/useUser.js"],"names":["useEffect","useState","useRouter","cookies","firebase","initFirebase","useUser","user","setUser","router","logout","auth","signOut","then","remove","push","e","console","error","cookie","get","JSON","parse"],"mappings":";;;;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAOC,YAAP,MAAyB,sBAAzB;AAEAA,YAAY;;AAEZ,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAAA;;AAAA,kBACIL,QAAQ,EADZ;AAAA,MACbM,IADa;AAAA,MACPC,OADO;;AAEpB,MAAMC,MAAM,GAAGP,SAAS,EAAxB;;AAEA,MAAMQ,MAAM;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA,+CACNN,QAAQ,CACZO,IADI,GAEJC,OAFI,GAGJC,IAHI,CAGC,YAAM;AACV;AACAV,gBAAAA,OAAO,CAACW,MAAR,CAAe,MAAf;AACAL,gBAAAA,MAAM,CAACM,IAAP,CAAY,OAAZ;AACD,eAPI,WAQE,UAACC,CAAD,EAAO;AACZC,gBAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACD,eAVI,CADM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAANN,MAAM;AAAA;AAAA;AAAA,KAAZ;;AAcAV,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMmB,MAAM,GAAGhB,OAAO,CAACiB,GAAR,CAAY,MAAZ,CAAf;;AACA,QAAI,CAACD,MAAL,EAAa;AACXV,MAAAA,MAAM,CAACM,IAAP,CAAY,GAAZ;AACA;AACD;;AACDP,IAAAA,OAAO,CAACa,IAAI,CAACC,KAAL,CAAWH,MAAX,CAAD,CAAP,CANc,CAOd;AACD,GARQ,EAQN,EARM,CAAT;AAUA,SAAO;AAAEZ,IAAAA,IAAI,EAAJA,IAAF;AAAQG,IAAAA,MAAM,EAANA;AAAR,GAAP;AACD,CA7BD;;GAAMJ,O;UAEWJ,S;;;AA6BjB,SAASI,OAAT","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport cookies from \"js-cookie\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport initFirebase from \"../auth/initFirebase\";\n\ninitFirebase();\n\nconst useUser = () => {\n  const [user, setUser] = useState();\n  const router = useRouter();\n\n  const logout = async () => {\n    return firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        // Sign-out successful.\n        cookies.remove(\"auth\");\n        router.push(\"/auth\");\n      })\n      .catch((e) => {\n        console.error(e);\n      });\n  };\n\n  useEffect(() => {\n    const cookie = cookies.get(\"auth\");\n    if (!cookie) {\n      router.push(\"/\");\n      return;\n    }\n    setUser(JSON.parse(cookie));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return { user, logout };\n};\n\nexport { useUser };\n"]},"metadata":{},"sourceType":"module"}
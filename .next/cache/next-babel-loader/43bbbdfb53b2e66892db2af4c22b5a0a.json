{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport cookies from \"js-cookie\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport initFirebase from \"../auth/initFirebase\";\ninitFirebase();\n\nvar useUser = function useUser() {\n  var _useState = useState(),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var router = useRouter();\n\n  var logout = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", firebase.auth().signOut().then(function () {\n                // Sign-out successful.\n                cookies.remove(\"auth\");\n                router.push(\"/auth\");\n              })[\"catch\"](function (e) {\n                console.error(e);\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function logout() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var cookie = cookies.get(\"auth\");\n\n    if (!cookie) {\n      router.push(\"/\");\n      return;\n    }\n\n    setUser(JSON.parse(cookie)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return {\n    user: user,\n    logout: logout\n  };\n};\n\nexport { useUser };","map":null,"metadata":{},"sourceType":"module"}
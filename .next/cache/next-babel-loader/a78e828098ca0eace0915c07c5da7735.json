{"ast":null,"code":"import { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport cookies from \"js-cookie\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport initFirebase from \"../auth/initFirebase\";\ninitFirebase();\n\nconst useUser = () => {\n  const {\n    0: user,\n    1: setUser\n  } = useState();\n  const router = useRouter();\n\n  const logout = async () => {\n    return firebase.auth().signOut().then(() => {\n      // Sign-out successful.\n      cookies.remove(\"auth\");\n      router.push(\"/auth\");\n    }).catch(e => {\n      console.error(e);\n    });\n  };\n\n  useEffect(() => {\n    const cookie = cookies.get(\"auth\");\n\n    if (!cookie) {\n      router.push(\"/\");\n      return;\n    }\n\n    setUser(JSON.parse(cookie)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return {\n    user,\n    logout\n  };\n};\n\nexport { useUser };","map":{"version":3,"sources":["/Users/kaybennett/Development/react-ecommerce/nextjs-blog/nextjs-blog/utils/auth/useUser.js"],"names":["useEffect","useState","useRouter","cookies","firebase","initFirebase","useUser","user","setUser","router","logout","auth","signOut","then","remove","push","catch","e","console","error","cookie","get","JSON","parse"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAOC,YAAP,MAAyB,sBAAzB;AAEAA,YAAY;;AAEZ,MAAMC,OAAO,GAAG,MAAM;AACpB,QAAM;AAAA,OAACC,IAAD;AAAA,OAAOC;AAAP,MAAkBP,QAAQ,EAAhC;AACA,QAAMQ,MAAM,GAAGP,SAAS,EAAxB;;AAEA,QAAMQ,MAAM,GAAG,YAAY;AACzB,WAAON,QAAQ,CACZO,IADI,GAEJC,OAFI,GAGJC,IAHI,CAGC,MAAM;AACV;AACAV,MAAAA,OAAO,CAACW,MAAR,CAAe,MAAf;AACAL,MAAAA,MAAM,CAACM,IAAP,CAAY,OAAZ;AACD,KAPI,EAQJC,KARI,CAQGC,CAAD,IAAO;AACZC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACD,KAVI,CAAP;AAWD,GAZD;;AAcAjB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMoB,MAAM,GAAGjB,OAAO,CAACkB,GAAR,CAAY,MAAZ,CAAf;;AACA,QAAI,CAACD,MAAL,EAAa;AACXX,MAAAA,MAAM,CAACM,IAAP,CAAY,GAAZ;AACA;AACD;;AACDP,IAAAA,OAAO,CAACc,IAAI,CAACC,KAAL,CAAWH,MAAX,CAAD,CAAP,CANc,CAOd;AACD,GARQ,EAQN,EARM,CAAT;AAUA,SAAO;AAAEb,IAAAA,IAAF;AAAQG,IAAAA;AAAR,GAAP;AACD,CA7BD;;AA+BA,SAASJ,OAAT","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport cookies from \"js-cookie\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport initFirebase from \"../auth/initFirebase\";\n\ninitFirebase();\n\nconst useUser = () => {\n  const [user, setUser] = useState();\n  const router = useRouter();\n\n  const logout = async () => {\n    return firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        // Sign-out successful.\n        cookies.remove(\"auth\");\n        router.push(\"/auth\");\n      })\n      .catch((e) => {\n        console.error(e);\n      });\n  };\n\n  useEffect(() => {\n    const cookie = cookies.get(\"auth\");\n    if (!cookie) {\n      router.push(\"/\");\n      return;\n    }\n    setUser(JSON.parse(cookie));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return { user, logout };\n};\n\nexport { useUser };\n"]},"metadata":{},"sourceType":"module"}